"use strict";(function(){class a{constructor(){}create(g){var h=this;this.elem.hide(),this.box=$(document.createElement("div")),this.box.addClass("inputdecor-"+g),this.elem.before(this.box),this.button=$(document.createElement("div")),this.button.addClass("button"),this.active&&this.button.addClass("active"),this.box.append(this.button),this.box.append(this.elem),this.button.click(function(){h.toogle()})}activate(){this.button.addClass("active"),this.elem.prop({checked:!0}),this.active=!0}deactivate(){this.button.removeClass("active"),this.elem.prop({checked:!1}),this.active=!1}toogle(){this.active?this.deactivate():this.activate()}}class b{constructor(g){var h=g.elem.attr("type")||g.elem[0].tagName.toLowerCase();this.input="ul"==h||"select"==h?new f(g):"checkbox"==h?new c(g):"radio"==h?new d(g):new c(g)}}class c extends a{constructor(g){super(),this.init(g),super.create("checkbox")}init(g){var h=this;this.elem=g.elem,this.name=g.elem.attr("name"),this.value=g.elem.val(),this.active=function(){var i=h.elem.prop("checked")||h.elem.attr("checked");return!!i}()}}class d extends a{constructor(g){super(),this.init(g),super.create("radio")}init(g){var h=this;this.elem=g.elem,this.name=g.elem.attr("name"),this.value=g.elem.val(),this.active=function(){var i=h.elem.prop("checked")||h.elem.attr("checked");return!!i}(),this.radios=$("input[type=radio][name=\""+this.name+"\"]"),this.elem[0].inputdecor=this}deactiveOther(g){this.radios.each(function(){this.inputdecor!==g&&this.inputdecor.deactivate()})}activate(){super.activate(),this.deactiveOther(this)}}class f{constructor(g){this.init(g)}init(g){var h=this;this.elem=g.elem,this.name=g.elem.attr("name"),this.value=g.elem.val(),this.speed=parseInt(this.elem.attr("data-inputdecor-speed"))||250,this.rollup=h.elem.attr("data-inputdecor-rollup")||!1,this.unselected=h.elem.attr("data-inputdecor-unselected")||!1,this.active=!1,this.text=function(){var i="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",j=h.elem.find("li.active");if(j.length)i=j.text();else{var k=h.elem.attr("data-inputdecor-text");k&&(i=k)}return i}(),this.class=this.elem.attr("data-inputdecor-class")||"",this.create()}create(){var g=this;this.elem.hide(),this.select=$(document.createElement("div")),this.select.addClass("inputdecor-select"),this.class&&this.select.addClass(this.class),this.elem.before(this.select),this.button=$(document.createElement("button")),this.button.addClass("button"),this.button.text(this.text),this.select.append(this.button),this.label=$(document.createElement("span")),this.label.addClass("label"),this.select.append(this.label),this.hidden=$(document.createElement("input")),this.hidden.attr("type","hidden"),this.name&&this.hidden.attr("name",this.name),this.hidden.val(this.value),this.select.append(this.hidden),this.list=$(document.createElement("ul")),this.list.addClass("list");var h=this.elem[0].innerHTML;h=h.replace(/option+/g,"li"),this.unselected&&this.list.append("<li>"+this.text+"</li>"),this.list.append(h),this.select.append(this.list),this.rollup&&(this.rollup=$(document.createElement("span")),this.rollup.addClass("rollup"),this.list.append(this.rollup),this.rollup.click(function(){g.close()})),this.elem.remove(),this.button.click(function(){g.toogle()}),this.list.click(function(i){if("LI"==i.target.tagName){var j=$(i.target);g.hidden.val(j.attr("value")),g.button.text(j.text())}}),document.body.addEventListener("click",function(i){i.target.parentNode!=g.select[0]&&g.close()})}open(){this.list.show(this.speed),this.label.addClass("active"),this.active=!0}close(){this.list.hide(this.speed),this.label.removeClass("active"),this.active=!1}toogle(){this.active?this.close():this.open()}}$.fn.decorate=function(g){this.each(function(){g?g.elem=$(this):g={elem:$(this)},this.binder=new b(g)})},$(document).ready(function(){$(".inputdecor").decorate()})})();