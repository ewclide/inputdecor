"use strict";var _get=function a(b,c,d){null===b&&(b=Function.prototype);var f=Object.getOwnPropertyDescriptor(b,c);if(f===void 0){var g=Object.getPrototypeOf(b);return null===g?void 0:a(g,c,d)}if("value"in f)return f.value;var h=f.get;return void 0===h?void 0:h.call(d)},_createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(){function a(j,k){return"string"==typeof j?"true"==j?j=!0:"false"==j?j=!1:j=k:void 0==j&&(j=k),j}var b=function(){function j(){_classCallCheck(this,j)}return _createClass(j,[{key:"create",value:function(l){var m=this;this.elem.hide(),this.box=$(document.createElement("div")),this.box.addClass("inputdecor-"+l),this.elem.before(this.box),this.button=$(document.createElement("div")),this.button.addClass("button"),this.active&&this.button.addClass("active"),this.box.append(this.button),this.box.append(this.elem),this.button.bind("click",function(){m.toogle()})}},{key:"activate",value:function(){this.button.addClass("active"),this.elem.prop({checked:!0}),this.active=!0}},{key:"deactivate",value:function(){this.button.removeClass("active"),this.elem.prop({checked:!1}),this.active=!1}},{key:"toogle",value:function(){this.active?this.deactivate():this.activate()}}]),j}(),c=function j(k){_classCallCheck(this,j);var l=k.elem.attr("type")||k.elem[0].tagName.toLowerCase();"ul"==l||"select"==l?this.input=new h(k):"checkbox"==l?this.input=new f(k):"radio"==l?this.input=new g(k):"file"==l&&(this.input=new d(k))},d=function(){function j(k){_classCallCheck(this,j),this.init(k)}return _createClass(j,[{key:"init",value:function(l){this;this.elem=l.elem,this.files=[],this.settings={text:l.text||this.elem.attr("data-text")||"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B",multiple:l.multiple||this.elem.attr("data-multiple")||!1,filesCount:l.filesCount||this.elem.attr("data-files-count")||!1,maxSize:l.maxSize||this.elem.attr("data-max-size")||!1,maxSumSize:l.maxSumSize||this.elem.attr("data-max-sumsize")||!1,drop:l.drop||this.elem.attr("data-drop")||!1,class:l.class||this.elem.attr("data-class")||!1},this.create(this.settings)}},{key:"create",value:function(l){var m=this;this.elem.hide(),l.multiple&&this.elem[0].setAttribute("multiple",""),this.button=$(document.createElement("button")),this.button.addClass("button"),this.button.text(l.text),this.button.click(function(){m.elem.click()});var n=$(document.createElement("div"));n.addClass("inputdecor-file"),l.class&&n.addClass(l.class),this.filesList=$(document.createElement("div")),this.filesList.addClass("files-list"),this.elem.after(n),n.append(this.button),n.append(this.filesList),n.append(this.elem),this.elem.change(function(){m.files=m.getFiles(m.elem[0].files),m.showFiles(m.files),m.elem.val("")})}},{key:"getFiles",value:function(l){for(var m=[],n=0;n<l.length;n++)m.push(l[n]);return m}},{key:"showFiles",value:function(l){var m=this,n=$(document.createElement("ul")),o="",p=0;l.length>m.settings.filesCount?o="\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0444\u0430\u0439\u043B\u043E\u0432 - "+m.settings.filesCount:l.forEach(function(q){if(m.settings.maxSumSize&&(p+=q.size),p&&p>m.settings.maxSumSize)return void(o="\u041F\u0440\u0435\u0432\u044B\u0448\u0435\u043D \u0441\u0443\u043C\u043C\u0430\u0440\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 \u0444\u0430\u0439\u043B\u043E\u0432.\n\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0443\u043C\u043C\u0430\u0440\u0435\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 - "+Math.round(m.settings.maxSumSize/1024)+"kb");if(m.settings.maxSize&&q.size>m.settings.maxSize)return void(o="\u041F\u0440\u0435\u0432\u044B\u0448\u0435\u043D \u0440\u0430\u0437\u043C\u0435\u0440 \u0444\u0430\u0439\u043B\u0430 \""+q.name+"\".\n\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440 - "+Math.round(m.settings.maxSize/1024)+"kb");var r=Math.round(q.size/1024),s=q.name;n.append("<li><p>"+s+"</p><span>"+r+"kb</span></li>")}),m.filesList.empty(),o?(alert(o),m.elem.val("")):m.filesList.append(n)}}]),j}(),f=function(j){function k(l){_classCallCheck(this,k);var m=_possibleConstructorReturn(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));return m.init(l),_get(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"create",m).call(m,"checkbox"),m}return _inherits(k,j),_createClass(k,[{key:"init",value:function(m){var n=this;this.elem=m.elem,this.name=m.elem.attr("name"),this.value=m.elem.val(),this.active=function(){var o=n.elem.prop("checked")||n.elem.attr("checked");return!!o}()}}]),k}(b),g=function(j){function k(l){_classCallCheck(this,k);var m=_possibleConstructorReturn(this,(k.__proto__||Object.getPrototypeOf(k)).call(this)),n=m;return m.init(l),_get(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"create",m).call(m,"radio"),m.button.unbind("click"),m.button.bind("click",function(){n.remove||n.active?n.remove&&n.toogle():n.activate()}),m}return _inherits(k,j),_createClass(k,[{key:"init",value:function(m){var n=this;this.elem=m.elem,this.name=m.elem.attr("name"),this.value=m.elem.val(),this.active=function(){var o=n.elem.prop("checked")||n.elem.attr("checked");return!!o}(),this.remove=a(m.remove||n.elem.attr("data-remove"),!0),this.radios=$("input[type=radio][name=\""+this.name+"\"]"),this.elem[0].inputdecor=this}},{key:"deactiveOther",value:function(m){this.radios.each(function(){this.inputdecor!==m&&this.inputdecor.deactivate()})}},{key:"activate",value:function(){_get(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"activate",this).call(this),this.deactiveOther(this)}}]),k}(b),h=function(){function j(k){_classCallCheck(this,j),this.init(k)}return _createClass(j,[{key:"init",value:function(l){var m=this;this.elem=l.elem,this.name=l.elem.attr("name"),this.value=l.elem.val(),this.speed=parseInt(this.elem.attr("data-speed"))||250,this.rollup=m.elem.attr("data-rollup")||!1,this.unselected=m.elem.attr("data-unselected")||!1,this.maxHeight=100,this.active=!1,this.text=function(){var n="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430",o=m.elem.find("li.active");if(o.length)n=o.text();else{var p=m.elem.attr("data-text");p&&(n=p)}return n}(),this.class=this.elem.attr("data-class")||"",this.create()}},{key:"create",value:function(){var l=this;this.elem.hide(),this.select=$(document.createElement("div")),this.select.addClass("inputdecor-select"),this.class&&this.select.addClass(this.class),this.elem.before(this.select),this.button=$(document.createElement("button")),this.button.addClass("button"),this.button.text(this.text),this.select.append(this.button),this.label=$(document.createElement("span")),this.label.addClass("label"),this.select.append(this.label),this.hidden=$(document.createElement("input")),this.hidden.attr("type","hidden"),this.name&&this.hidden.attr("name",this.name),this.hidden.val(this.value),this.select.append(this.hidden),this.list=$(document.createElement("ul")),this.list.addClass("list");var m=this.elem[0].innerHTML;m=m.replace(/option+/g,"li"),this.unselected&&this.list.append("<li>"+this.text+"</li>"),this.list.append(m),this.wrapper=$(document.createElement("div")),this.wrapper.addClass("list-wrapper"),this.wrapper.css({overflow:"hidden",position:"absolute",width:"100%"}),this.wrapper.append(this.list),this.select.append(this.wrapper),this.wrapper.ready(function(){l.maxHeight=l.wrapper.outerHeight(),l.wrapper.height(0)}),this.rollup&&(this.rollup=$(document.createElement("span")),this.rollup.addClass("rollup"),this.list.append(this.rollup),this.rollup.click(function(){l.close()})),this.elem.remove(),this.button.click(function(){l.toogle()}),this.list.click(function(n){if("LI"==n.target.tagName){var o=$(n.target);l.hidden.val(o.attr("value")),l.button.text(o.text())}}),document.body.addEventListener("click",function(n){n.target.parentNode!=l.select[0]&&l.close()})}},{key:"open",value:function(l){this.wrapper.animate({height:this.maxHeight},void 0===l?this.speed:l),this.button.addClass("active"),this.label.addClass("active"),this.active=!0}},{key:"close",value:function(l){this.wrapper.animate({height:0},void 0===l?this.speed:l),this.button.removeClass("active"),this.label.removeClass("active"),this.active=!1}},{key:"toogle",value:function(l){this.active?this.close(l):this.open(l)}}]),j}();$.fn.decorate=function(j){this.each(function(){j?j.elem=$(this):j={elem:$(this)},this.binder=new c(j)})},$(document).ready(function(){$(".inputdecor").decorate()})})();